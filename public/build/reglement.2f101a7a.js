(self.webpackChunk=self.webpackChunk||[]).push([[389],{9089:(e,r,n)=>{var t=n(9755);function a(e,r,n,t,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void n(e)}s.done?r(l):Promise.resolve(l).then(t,a)}function o(e){return function(){var r=this,n=arguments;return new Promise((function(t,o){var i=e.apply(r,n);function s(e){a(i,t,o,s,l,"next",e)}function l(e){a(i,t,o,s,l,"throw",e)}s(void 0)}))}}n(3076),n(4916),n(4765),n(2772),n(561),n(9826),n(1539),n(2564),n(8674),t(document).ready((function(){var e=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}),r=!1,n=[],a=t("#datables_reglement").DataTable({lengthMenu:[[10,15,25,50,100,2e13],[10,15,25,50,100,"All"]],order:[[0,"desc"]],ajax:"/facture/reglements/list",processing:!0,serverSide:!0,deferRender:!0,scrollX:!0,drawCallback:function(){t("body tr#"+r).addClass("active_databales")},preDrawCallback:function(e){t.fn.DataTable.isDataTable("#datables_reglement")&&((e=t("#datables_reglement").DataTable().settings())[0].jqXHR&&e[0].jqXHR.abort())},language:datatablesFrench});t("select").select2(),t("#etablissement").on("change",o(regeneratorRuntime.mark((function e(){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(this).val(),a.columns(1).search(""),n="",""==r){e.next=13;break}return t("#paiement")&&""!=t("#paiement").val()&&a.columns(2).search(t("#paiement").val()),""!=t("#bordereaux").val()&&a.columns(3).search(t("#bordereaux").val()),a.columns(0).search(r).draw(),e.next=9,axios.get("/api/formation/"+r);case 9:o=e.sent,n=o.data,e.next=16;break;case 13:a.columns(0).search(r).draw(),t("#paiement")&&""!=t("#paiement").val()&&a.columns(2).search(t("#paiement").val()),""!=t("#bordereaux").val()&&a.columns(3).search(t("#bordereaux").val());case 16:t("#formation").html(n).select2();case 17:case"end":return e.stop()}}),e,this)})))),t("#formation").on("change",o(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t(this).val(),a.columns().search(""),""!=t("#paiement").val()&&a.columns(2).search(t("#paiement").val()),""!=t("#bordereaux").val()&&a.columns(3).search(t("#bordereaux").val()),"",""==r){e.next=13;break}return a.columns(1).search(r).draw(),e.next=9,axios.get("/api/promotion/"+r);case 9:n=e.sent,n.data,e.next=14;break;case 13:a.columns(0).search(t("#etablissement").val()).draw();case 14:case"end":return e.stop()}}),e,this)})))),t("#paiement").on("change",o(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t(this).val(),a.columns(2).search(r).draw();case 2:case"end":return e.stop()}}),e,this)})))),t("#bordereaux").on("change",o(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t(this).val(),a.columns(3).search(r).draw();case 2:case"end":return e.stop()}}),e,this)})))),t("body").on("dblclick","#datables_reglement tbody tr",(function(e){e.preventDefault(),t(this).hasClass("active_databales")?(t(this).removeClass("active_databales"),r=null):(t("#datables_reglement tbody tr").removeClass("active_databales"),t(this).addClass("active_databales"),r=t(this).attr("id"),function(){t("#modifier_org-modal .modal-body .alert").remove();var e=t("#modifier i");e.removeClass("fa-edit").addClass("fa-spinner fa-spin"),axios.get("/facture/reglements/getReglementInfos/"+r).then((function(r){e.removeClass("fa-spinner fa-spin").addClass("fa-edit"),console.log(r),t("#edit_modal .edit_reglement-form").html(r.data),t("#edit_modal .edit_reglement-form select").select2()})).catch((function(r){console.log(r),e.removeClass("fa-spinner fa-spin ").addClass("fa-edit")}))}()),console.log(r)})),t("body").on("click","#check",(function(){var e=t(this);if(console.log(e.attr("data-id")),e.is(":checked"))n.push(e.attr("data-id"));else{var r=n.indexOf(e.attr("data-id"));n.splice(r,1)}console.log(n)})),t("body").on("click","#imprimer",function(){var n=o(regeneratorRuntime.mark((function n(t){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.preventDefault(),r){n.next=4;break}return e.fire({icon:"error",title:"Veuillez selection une ligne!"}),n.abrupt("return");case 4:window.open("/facture/reglements/reglementprint/"+r,"_blank");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),t("body").on("click","#borderaux",function(){var r=o(regeneratorRuntime.mark((function r(o){var i,s,l,c,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),t("#modifier_org-modal .modal-body .alert").remove(),i=t("#borderaux i"),0!==n.length&&""!=t("#etablissement").val()&&""!=t("#formation").val()&&""!=t("#paiement").val()){r.next=7;break}return e.fire({icon:"error",title:"Merci de Choisir l'etablissement, la formation, mode de paiement et au moins une ligne, "}),r.abrupt("return");case 7:return i.removeClass("fa-folder").addClass("fa-spinner fa-spin"),(s=new FormData).append("ids_reglement",JSON.stringify(n)),r.prev=10,r.next=13,axios.post("/facture/reglements/borderaux/"+t("#formation").val()+"/"+t("#paiement").val(),s);case 13:l=r.sent,c=l.data,i.addClass("fa-folder").removeClass("fa-spinner fa-spin"),e.fire({icon:"success",title:"Borderaux Bien Genere"}),n.length=[],window.open("/facture/reglements/printborderaux/"+c,"_blank"),a.ajax.reload(null,!1),console.log(n),r.next=29;break;case 23:r.prev=23,r.t0=r.catch(10),u=r.t0.response.data,console.log(r.t0,r.t0.response),i.addClass("fa-folder").removeClass("fa-spinner fa-spin"),e.fire({icon:"error",title:u});case 29:case"end":return r.stop()}}),r,null,[[10,23]])})));return function(e){return r.apply(this,arguments)}}()),t("body").on("click","#imprimer_creance",function(){var e=o(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),window.open("/facture/reglements/creanceprint","_blank");case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),t("body").on("click","#annuler",(function(n){n.preventDefault(),r?t("#annuler_reglement_modal").modal("show"):e.fire({icon:"error",title:"Merci de choisir un reglement"})})),t("body").on("click","#Annuler_reglement",function(){var n=o(regeneratorRuntime.mark((function n(o){var i,s,l,c,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o.preventDefault(),r){n.next=4;break}return e.fire({icon:"error",title:"Merci de choisir un reglement"}),n.abrupt("return");case 4:if(""!=t("#motif_annuler").find(":selected").val()){n.next=7;break}return e.fire({icon:"error",title:"Merci de Choisir Le Motif d'annulation"}),n.abrupt("return");case 7:if(1!=confirm("Vous voulez vraiment Annuler cette Reglement ?")){n.next=28;break}return(i=t("#Annuler_reglement i")).removeClass("fa-times-circle").addClass("fa-spinner fa-spin"),(s=new FormData).append("motif_annuler",t("#motif_annuler").val()),n.prev=13,n.next=16,axios.post("/facture/reglements/annuler_reglement/"+r,s);case 16:l=n.sent,c=l.data,e.fire({icon:"success",title:c}),a.ajax.reload(null,!1),i.addClass("fa-times-circle").removeClass("fa-spinner fa-spin"),n.next=28;break;case 23:n.prev=23,n.t0=n.catch(13),u=n.t0.response.data,e.fire({icon:"error",title:u}),i.addClass("fa-times-circle").removeClass("fa-spinner fa-spin");case 28:case"end":return n.stop()}}),n,null,[[13,23]])})));return function(e){return n.apply(this,arguments)}}()),t("body").on("click","#modifier",(function(n){n.preventDefault(),r?t("#edit_modal").modal("show"):e.fire({icon:"error",title:"Veuillez selection une ligne!"})})),t("body").on("submit",".edit_reglement-form",function(){var e=o(regeneratorRuntime.mark((function e(n){var o,i,s,l,c,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o=t(this).serialize(),(i=t("#edit_modal .modal-body .alert")).remove(),(s=t(".edit_reglement-form .btn i")).removeClass("fa-check-circle").addClass("fa-spinner fa-spin"),e.prev=6,e.next=9,axios.post("/facture/reglements/modifier_reglement/"+r,o);case 9:l=e.sent,c=l.data,t("#edit_modal .modal-body").prepend('<div class="alert alert-success">'.concat(c,"</div>")),s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin"),reglement=!1,a.ajax.reload(null,!1),window.open("/facture/reglements/reglementprint/"+r,"_blank"),e.next=25;break;case 18:e.prev=18,e.t0=e.catch(6),u=e.t0.response.data,console.log(e.t0,e.t0.response),i.remove(),t("#edit_modal .modal-body").prepend('<div class="alert alert-danger">'.concat(u,"</div>")),s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin ");case 25:setTimeout((function(){t("#edit_modal .modal-body .alert").remove()}),4e3);case 26:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(r){return e.apply(this,arguments)}}()),t("body").on("click","#extraction",(function(){window.open("/facture/reglements/extraction_reglement","_blank")}))}))},1194:(e,r,n)=>{var t=n(7293),a=n(5112),o=n(7392),i=a("species");e.exports=function(e){return o>=51||!t((function(){var r=[];return(r.constructor={})[i]=function(){return{foo:1}},1!==r[e](Boolean).foo}))}},9341:(e,r,n)=>{"use strict";var t=n(7293);e.exports=function(e,r){var n=[][e];return!!n&&t((function(){n.call(null,r||function(){throw 1},1)}))}},6135:(e,r,n)=>{"use strict";var t=n(4948),a=n(3070),o=n(9114);e.exports=function(e,r,n){var i=t(r);i in e?a.f(e,i,o(0,n)):e[i]=n}},2772:(e,r,n)=>{"use strict";var t=n(2109),a=n(1702),o=n(1318).indexOf,i=n(9341),s=a([].indexOf),l=!!s&&1/s([1],1,-0)<0,c=i("indexOf");t({target:"Array",proto:!0,forced:l||!c},{indexOf:function(e){var r=arguments.length>1?arguments[1]:void 0;return l?s(this,e,r)||0:o(this,e,r)}})},561:(e,r,n)=>{"use strict";var t=n(2109),a=n(7854),o=n(1400),i=n(9303),s=n(6244),l=n(7908),c=n(5417),u=n(6135),d=n(1194)("splice"),f=a.TypeError,m=Math.max,p=Math.min,v=9007199254740991,h="Maximum allowed length exceeded";t({target:"Array",proto:!0,forced:!d},{splice:function(e,r){var n,t,a,d,g,b,x=l(this),w=s(x),k=o(e,w),_=arguments.length;if(0===_?n=t=0:1===_?(n=0,t=w-k):(n=_-2,t=p(m(i(r),0),w-k)),w+n-t>v)throw f(h);for(a=c(x,t),d=0;d<t;d++)(g=k+d)in x&&u(a,d,x[g]);if(a.length=t,n<t){for(d=k;d<w-t;d++)b=d+n,(g=d+t)in x?x[b]=x[g]:delete x[b];for(d=w;d>w-t+n;d--)delete x[d-1]}else if(n>t)for(d=w-t;d>k;d--)b=d+n-1,(g=d+t-1)in x?x[b]=x[g]:delete x[b];for(d=0;d<n;d++)x[d+k]=arguments[d+2];return x.length=w-t+n,a}})}},e=>{e.O(0,[755,29,515],(()=>{return r=9089,e(e.s=r);var r}));e.O()}]);